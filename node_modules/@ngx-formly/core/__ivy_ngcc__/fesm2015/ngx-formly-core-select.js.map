{"version":3,"file":"ngx-formly-core-select.js","sources":["@ngx-formly/core/select/select-options.pipe.ts","@ngx-formly/core/select/select.module.ts"],"names":["observableOf"],"mappings":"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","sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\nimport { Observable, of as observableOf } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { FormlyFieldConfig } from '@ngx-formly/core';\n\n@Pipe({ name: 'formlySelectOptions' })\nexport class FormlySelectOptionsPipe implements PipeTransform {\n  transform(options, field?: FormlyFieldConfig) {\n    if (!(options instanceof Observable)) {\n      options = observableOf(options);\n    }\n\n    return (options as Observable<any>).pipe(\n      map(value => this.toOptions(value, field || {})),\n    );\n  }\n\n  private toOptions(options, field: FormlyFieldConfig) {\n    const gOptions: any[] = [],\n      groups: { [key: string]: any[] } = {},\n      to = field.templateOptions || {};\n\n    to._flatOptions = true;\n    options.map((option: any) => {\n      if (!this.getGroupProp(option, to)) {\n        gOptions.push(this.toOption(option, to));\n      } else {\n        to._flatOptions = false;\n        if (!groups[this.getGroupProp(option, to)]) {\n          groups[this.getGroupProp(option, to)] = [];\n          gOptions.push({\n            label: this.getGroupProp(option, to),\n            group: groups[this.getGroupProp(option, to)],\n          });\n        }\n        groups[this.getGroupProp(option, to)].push(this.toOption(option, to));\n      }\n    });\n\n    return gOptions;\n  }\n\n  private toOption(item, to) {\n    return {\n      label: this.getLabelProp(item, to),\n      value: this.getValueProp(item, to),\n      disabled: this.getDisabledProp(item, to) || false,\n    };\n  }\n\n  private getLabelProp(item, to): string {\n    if (typeof to.labelProp === 'function') {\n      return to.labelProp(item);\n    }\n\n    if (this.shouldUseLegacyOption(item, to)) {\n      console.warn(`NgxFormly: legacy select option '{key, value}' is deprecated since v5.5, use '{value, label}' instead.`);\n      return item.value;\n    }\n\n    return item[to.labelProp || 'label'];\n  }\n\n  private getValueProp(item, to): string {\n    if (typeof to.valueProp === 'function') {\n      return to.valueProp(item);\n    }\n\n    if (this.shouldUseLegacyOption(item, to)) {\n      return item.key;\n    }\n\n    return item[to.valueProp || 'value'];\n  }\n\n  private getDisabledProp(item, to): string {\n    if (typeof to.disabledProp === 'function') {\n      return to.disabledProp(item);\n    }\n    return item[to.disabledProp || 'disabled'];\n  }\n\n  private getGroupProp(item, to): string {\n    if (typeof to.groupProp === 'function') {\n      return to.groupProp(item);\n    }\n\n    return item[to.groupProp || 'group'];\n  }\n\n  private shouldUseLegacyOption(item, to) {\n    return !to.valueProp\n      && !to.labelProp\n      && item != null\n      && typeof item === 'object'\n      && 'key' in item\n      && 'value' in item;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { FormlySelectOptionsPipe } from './select-options.pipe';\n\n@NgModule({\n  declarations: [FormlySelectOptionsPipe],\n  exports: [FormlySelectOptionsPipe],\n})\nexport class FormlySelectModule { }\n"]}